#stm32中断程序流程(GPIO中断为例)
GPIO中断分为EXTIO_IRQ0到EXTIO_IRQ19，20个中断（f105,f107系列EXTIO_IRQ20），其中EXTIO_IRQ0包含PTA0，PTB0---PTG0。
##配置中断优先级
1.确定中断分组，在SCB->AIRCR里的PRIGROUP位设置：
|优先级分组|主优先级|子优先级|
|--------|--------|------|
|NVIC_PriorityGroup_0|0(0位)|0-15(4位)|
|NVIC_PriorityGroup_1|0-1(1位)|0-7(3位)|
|NVIC_PriorityGroup_2|0-3(2位)|0-3(2位)|
|NVIC_PriorityGroup_3|0-7(3位)|0-1(1位)|
|NVIC_PriorityGroup_4|0-15(4位)|0(0位)|
2.中断优先级设定，在NVIC->IPRx里进行设置（外部中断(如，GPIO中断)在NVIC里设置，系统内部中断(如，定时器中断)在SCB中的SHPRx里设置)：

|bit7|bit6|bit5|bit4|bit3|bit2|bit1|
|----|----|----|----|----|----|----|
|用于表达优先级|用于表达优先级|用于表达优先级|用于表达优先级|未使用，读回为0|未使用，读回为0|未使用，读回为0|未使用，读回为0|
##初始化GPIO
见前节。
**GPIO模式初始化为浮空输入，由于按键外部上拉。**
##具体到GPIO引脚（只有GPIO中断输入才有这一步）
1.开AFIO时钟。
2.配置中断具体到某一个GPIO引脚，如果使用EXTIO_IRQ0中断，则可能会有PTA0---PTG0这些引脚都可以作为中断源，所以具体到哪根引脚。
##初始化EXTI(管理外部中断的，系统内部中断不需要)
1.设置EXTI0中断。
2.配置为中断模式EXTI_IMR寄存器(还有事件模式EXTI_EMR寄存器)。
3.配置为上升/下降沿触发。
##编写中断服务函数
##系统内部中断
对于系统内部中断的配置(以定时器为例)，只需要一下两个步骤：
1.设置中断优先级，于SCB中的SHPRx里设置。
2.开启定时器中断，在定时器SysTick控制及状态寄存器CTRL里TICKINT位设置。
3.中断服务函数。